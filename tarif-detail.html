<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Tarif Mesin</title>
    <style>
        /* --- TEMA --- */
        :root {
            --bg: #f0f2f5; --text: #333; --accent: #0d47a1; 
            --card: #fff; --border: #ccc; --th-bg: #f9f9f9;
        }
        [data-theme="dark"] {
            --bg: #0a192f; --text: #e6f1ff; --accent: #64ffda; 
            --card: #172a45; --border: #303C55; --th-bg: #112240;
        }

        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg); color: var(--text); padding: 25px; transition: 0.3s; }
        .back-button { display: inline-block; position: absolute; top: 25px; left: 25px; background: #78909c; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; font-weight: 600; }
        
        h2 { text-align: center; color: var(--accent); font-size: 1.8em; margin-top: 50px; margin-bottom: 30px; }
        
        .data-card { background: var(--card); border-radius: 12px; overflow: hidden; max-width: 1200px; margin: 0 auto; border: 1px solid var(--border); }
        .data-table { width: 100%; border-collapse: collapse; color: var(--text); }
        .data-table th { text-align: left; padding: 12px 20px; border-bottom: 2px solid var(--border); background-color: var(--th-bg); color: var(--accent); }
        .data-table td { padding: 12px 20px; border-bottom: 1px solid var(--border); }
        .data-table .val { text-align: right; font-weight: 600; }
        
        .tarif-controls { background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 20px; max-width: 1200px; margin: 20px auto; color: var(--text); }
    </style>
</head>
<body>
    
    <a href="tarif.html" class="back-button">&#8592; Kembali</a>
    <h2 id="tarif-detail-title">Detail Tarif Mesin...</h2>
    
    <div class="tarif-controls">
        <label>Rentang Waktu: </label>
        <button onclick="setTarifRange('daily')">Hari Ini</button>
        <button onclick="setTarifRange('weekly')">Minggu Ini</button>
        <button onclick="fetchTarifData()">Refresh Data</button>
        <input type="hidden" id="tarif-datepicker-start"><input type="hidden" id="tarif-datepicker-end">
    </div>
    
    <div id="tarif-loading" style="text-align:center; display:none;">Memuat data...</div>
    <div class="data-card">
        <table class="data-table" id="tarif-data-table"></table>
    </div>

<script>
    // CEK TEMA
    if (localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');

    // ... (LOGIKA JS LAINNYA SAMA SEPERTI SEBELUMNYA) ...
    // Saya singkat untuk fokus ke tema, tapi pastikan logika fetchTarifData() dari kode sebelumnya tetap ada
    let activeMachineId = 1;
    const fmt_rp = (val) => 'Rp ' + Number(val).toLocaleString('id-ID');
    const rand = (min, max) => (Math.random() * (max - min) + min).toFixed(0);

    window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('id')) activeMachineId = urlParams.get('id');
        document.getElementById("tarif-detail-title").textContent = `Detail Tarif Mesin ${activeMachineId}`;
        setTarifRange('weekly');
        fetchTarifData();
    };

    window.setTarifRange = (range) => { /* Logika tanggal sama */ };

    window.fetchTarifData = async () => {
        const table = document.getElementById("tarif-data-table");
        // ... (Generate dummy data seperti sebelumnya) ...
        // Contoh output singkat:
        let html = `<thead><tr><th>Tanggal</th><th class="val">Biaya</th><th class="val">kWh</th></tr></thead><tbody>`;
        for(let i=0; i<5; i++) {
            html += `<tr><td>2023-11-${18-i}</td><td class="val">${fmt_rp(rand(50000,100000))}</td><td class="val">${rand(50,100)}</td></tr>`;
        }
        html += `</tbody>`;
        table.innerHTML = html;
    }
</script>

</body>
</html>
