<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="auth_script.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const authInfo = await checkUserRole();
        const statusElement = document.getElementById('authStatus');
        
        // 1. Logika Proteksi: Jika TIDAK login, redirect ke login.html
        if (!authInfo.isLoggedIn) {
            window.location.href = 'login.html'; // LOGIKA REDIRECT HANYA DI SINI!
            return;
        }

        // 2. Tampilkan status jika berhasil login
        const profile = authInfo.profile;
        statusElement.innerHTML = `Login sebagai: <b>${profile.full_name || 'User'}</b> (${authInfo.role.toUpperCase()})`;
        statusElement.style.color = 'green';
    });
    // ... (fungsi goToPage) ...
</script>
