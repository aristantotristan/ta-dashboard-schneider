<script>
const supabaseUrl = "https://rojhcadtqfynlqzubftx.supabase.co";
const apiKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvamhjYWR0cWZ5bmxxenViZnR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIxMzYzNTksImV4cCI6MjA3NzcxMjM1OX0.XZElBWD-QdS8XVKex92VKUAlifC6BXqe3kGYPmZ1Mcs"; // Aman di front-end
const table = "energy_log";

async function loadData() {
  const res = await fetch(
    `${supabaseUrl}/rest/v1/${table}?select=*`,
    { headers: { apikey: apiKey } }
  );

  const data = await res.json();

  // contoh kalkulasi
  let last = data[data.length - 1];

  let biaya = last.energy_kwh * 1500;

  document.getElementById("volt").innerText = last.voltage;
  document.getElementById("amp").innerText = last.current;
  document.getElementById("kwh").innerText = last.energy_kwh;
  document.getElementById("biaya").innerText = biaya.toFixed(0);
}
loadData();
</script>
