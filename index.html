<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CYBER GRID 3D - POWER METER</title>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/OrbitControls.js"></script>
<style>
    body { margin:0; overflow:hidden; background:#000; font-family:'Orbitron',sans-serif; }
    canvas { display:block; }
    #ui {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        pointer-events: none;
        z-index: 10;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 40px;
        box-sizing: border-box;
    }
    h1 {
        font-size: clamp(3rem, 10vw, 8rem);
        font-weight: 900;
        text-align: center;
        background: linear-gradient(90deg, #00ff9d, #00ffff, #ff00ff, #00ff9d);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 60px #00ff9d;
        letter-spacing: 10px;
        animation: titleGlow 4s infinite alternate;
    }
    @keyframes titleGlow { 
        0% { text-shadow: 0 0 40px #00ff9d; }
        100% { text-shadow: 0 0 100px #00ff9d, 0 0 150px #00ffff; }
    }
    .btn-container {
        display: flex;
        flex-direction: column;
        gap: 25px;
        align-items: center;
        pointer-events: all;
    }
    .btn {
        padding: 20px 80px;
        background: rgba(0,255,157,0.15);
        border: 2px solid #00ff9d;
        border-radius: 15px;
        color: #00ff9d;
        font-size: 1.8rem;
        font-weight: bold;
        letter-spacing: 6px;
        text-decoration: none;
        backdrop-filter: blur(15px);
        box-shadow: 0 0 40px rgba(0,255,157,0.5);
        transition: all 0.4s;
    }
    .btn:hover {
        background: #00ff9d;
        color: #000;
        transform: translateY(-12px) scale(1.1);
        box-shadow: 0 0 100px #00ff9d, 0 0 150px #00ffff;
    }
</style>
</head>
<body>

<div id="ui">
    <h1>CYBER GRID</h1>
    <div class="btn-container">
        <a href="realtime.html" class="btn">REALTIME</a>
        <a href="result_wbp_lwbp.html" class="btn">WBP / LWBP</a>
    </div>
</div>

<script>
// === CYBER GRID 3D MURNII ===
const scene = new THREE.Scene();
scene.fog = new THREE.FogExp2(0x000000, 0.0008);

const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0, 15, 40);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.07;
controls.autoRotate = true;
controls.autoRotateSpeed = 0.5;

// GRID TAK TERHINGGA
const gridSize = 200;
const gridDiv = 60;
const grid = new THREE.GridHelper(gridSize, gridDiv, 0x00ff9d, 0x00ff9d);
grid.material.opacity = 0.4;
grid.material.transparent = true;
scene.add(grid);

// GARIS VERTIKAL (kedalaman)
for(let i = -gridSize/2; i <= gridSize/2; i += gridSize/gridDiv) {
    const line = new THREE.Line(
        new THREE.BufferGeometry().setFromPoints([
            new THREE.Vector3(i, 0, -gridSize/2),
            new THREE.Vector3(i, 0, gridSize/2)
        ]),
        new THREE.LineBasicMaterial({color:0x00ffff, transparent:true, opacity:0.3})
    );
    scene.add(line);
}

// PARTIKEL ALIRAN LISTRIK
const particles = [];
const particleCount = 800;
const geometry = new THREE.SphereGeometry(0.15, 8, 8);
const material = new THREE.MeshBasicMaterial({color:0x00ffff});

for(let i=0; i<particleCount; i++) {
    const p = new THREE.Mesh(geometry, material);
    p.position.set(
        (Math.random()-0.5)*gridSize,
        Math.random()*30,
        (Math.random()-0.5)*gridSize
    );
    p.velocity = new THREE.Vector3(
        (Math.random()-0.5)*0.3,
        -Math.random()*2 - 1,
        (Math.random()-0.5)*0.3
    );
    scene.add(p);
    particles.push(p);
}

function animate() {
    requestAnimationFrame(animate);
    
    // Gerakin partikel + respawn kalau jatuh
    particles.forEach(p => {
        p.position.add(p.velocity);
        if(p.position.y < -20) {
            p.position.y = 30;
            p.position.x = (Math.random()-0.5)*gridSize;
            p.position.z = (Math.random()-0.5)*gridSize;
        }
    });

    // Efek glow grid
    const time = Date.now() * 0.001;
    grid.material.opacity = 0.4 + 0.3 * Math.sin(time*3);

    controls.update();
    renderer.render(scene, camera);
}
animate();

window.addEventListener('resize', () => {
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
});
</script>

</body>
</html>
