<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>POWER METER DASHBOARD</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family: Arial; background:#0f172a; color:#e5e7eb; }
.card { background:#020617; padding:20px; border-radius:10px; margin:10px; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
.value { font-size:28px; font-weight:bold; }
label { color:#94a3b8;}
</style>
</head>
<body>

<h2>âš¡ POWER METER DASHBOARD</h2>

<div class="grid">
<div class="card"><label>Status</label><div class="value" id="status">-</div></div>
<div class="card"><label>Voltage (V)</label><div class="value" id="v">-</div></div>
<div class="card"><label>Power (W)</label><div class="value" id="p">-</div></div>
<div class="card"><label>Energy (kWh)</label><div class="value" id="e">-</div></div>
</div>

<script>
const SUPABASE_URL = "https://YOUR_PROJECT_ID.supabase.co";
const API_KEY = "YOUR_ANON_KEY";

async function loadData(){
  const res = await fetch(`${SUPABASE_URL}/rest/v1/meter_data?select=*&order=timestamp.desc&limit=1`,{
    headers:{
      "apikey":API_KEY,
      "Authorization":"Bearer "+API_KEY
    }
  });
  const d = (await res.json())[0];
  if(!d) return;

  status.innerText = d.status || "ONLINE";
  v.innerText = d.v?.toFixed(1);
  p.innerText = d.p?.toFixed(1);
  e.innerText = d.eat?.toFixed(3);
}

loadData();
setInterval(loadData,2000);
</script>

</body>
</html>
